define(function(require,e,t){function r(e){e.ctrlKey&&e.keyCode==13&&$(this).closest("form").submit()}var n=function(e,t,n){return'<form class="form-horizontal reply" method="post" action="/comment/save" id="J_replaybox"><textarea class="input" name="content" rows="3"></textarea><div class="reply-btn-box"><button class="btn J_replysubmit" type="submit">回复</button><button class="btn J_replycencel" type="button">取消</button></div><input type="hidden" name="replyid" value="'+e+'">'+'<input type="hidden" name="replyname" value="'+t+'">'+'<input type="hidden" name="diaryid" value="'+n+'">'+"</form>"};$("a.J_reply").live("click",function(){$("#J_replaybox").remove();var e=$(this).attr("data-replyid"),t=$(this).attr("data-replyname"),r=$(this).attr("data-diaryid");return $(this).parent().append(n(e,t,r)),!1}),$("#J_replaybox textarea,#J_comment_textarea").live("keydown",r),$("button.J_replycencel").live("click",function(){return $("#J_replaybox").remove(),!1}),$('form[action="/comment/save"]').bind("submit",function(){$("#J_comment_submit,.J_replysubmit").attr("disabled",!0).addClass("disabled")})});